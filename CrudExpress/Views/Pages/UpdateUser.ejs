<%- include('../partials/Header.ejs') -%>
    <div class="d-flex justify-content-center v100 align-items-center my-5">
        <div class="w-50 p-4 rounded-4 ">
            <form action="" method="post" class="w-100" onsubmit="return validateForm()">
                <h4 class="text-light mb-3 text-dark">Update User</h4>
                <div class="mb-3">
                    <input type="text" name="name" class="form-control" placeholder="NAME" id="name"
                        value="<%= user.name %>">
                    <div id="name-error" class="text-warning"></div>
                </div>
                <div class="mb-3">
                    <input type="email" name="email" class="form-control" placeholder="EMAIL" id="email"
                        value="<%= user.email %>">
                    <div id="email-error" class="text-warning"></div>
                </div>
                <div class="d-flex align-items-center form-control p-2">
                    <label class="me-4">GENDER : </label>
                    <div class="form-check me-4">
                        <input class="form-check-input" type="radio" name="gender" id="male" value="Male"
                            <%=user.gender==='Male' ? 'checked' : '' %>>
                        <label class="form-check-label" for="male">
                            MALE
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="gender" id="female" value="Female"
                            <%=user.gender==='Female' ? 'checked' : '' %>>
                        <label class="form-check-label" for="female">
                            FEMALE
                        </label>
                    </div>
                </div>
                <div id="gender-error" class="text-warning mb-3"></div>
                <div class="mb-3">
                    <select name="course" class="form-select" id="course">
                        <option value="">--SELECT COURSE--</option>
                        <option value="CS" <%=user.course==='CS' ? 'selected' : '' %>>CS
                        </option>
                        <option value="Civil" <%=user.course==='Civil' ? 'selected' : '' %>>Civil</option>
                        <option value="Mech" <%=user.course==='Mech' ? 'selected' : '' %>
                            >Mech</option>
                        <option value="Elec" <%=user.course==='Elec' ? 'selected' : '' %>
                            >Elec</option>
                        <option value="Chem" <%=user.course==='Chem' ? 'selected' : '' %>
                            >Chem</option>
                    </select>
                    <div id="course-error" class="text-warning"></div>
                </div>
                <div class="form-control">
                    <label class="d-block mb-3">HOBBY:</label>
                    <div class="row px-3">
                        <% let userHobbies=user.hobby %>
                            <div class="col-lg-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="hobby" id="hobby1"
                                        value="Reading" <%=userHobbies.includes('Reading') ? 'checked' : '' %>>
                                    <label class="form-check-label" for="hobby1">
                                        Reading
                                    </label>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="hobby" id="hobby2"
                                        value="Traveling" <%=userHobbies.includes('Traveling') ? 'checked' : '' %>>
                                    <label class="form-check-label" for="hobby2">
                                        Traveling
                                    </label>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="hobby" id="hobby3"
                                        value="Gaming" <%=userHobbies.includes('Gaming') ? 'checked' : '' %>>
                                    <label class="form-check-label" for="hobby3">
                                        Gaming
                                    </label>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="hobby" id="hobby4"
                                        value="Writing" <%=userHobbies.includes('Writing') ? 'checked' : '' %>>
                                    <label class="form-check-label" for="hobby4">
                                        Writing
                                    </label>
                                </div>
                            </div>
                    </div>
                </div>
                <div id="hobby-error" class="text-warning mb-3"></div>
                <div class="mb-3">
                    <textarea name="address" cols="30" rows="10" class="form-control" placeholder="ADDRESS"
                        id="address"><%= user.address %></textarea>
                    <div id="address-error" class="text-warning"></div>
                </div>
                <button type="submit" class="btn btn-outline-dark">Update</button>
            </form>
        </div>
    </div>
    <script>
        function validateForm() {
            let isValid = true;
            document.getElementById('name-error').innerText = '';
            document.getElementById('email-error').innerText = '';
            document.getElementById('gender-error').innerText = '';
            document.getElementById('course-error').innerText = '';
            document.getElementById('hobby-error').innerText = '';
            document.getElementById('address-error').innerText = '';

            if (document.getElementById('name').value.trim() === "") {
                document.getElementById('name-error').innerText = 'Name is required';
                isValid = false;
            }
            if (document.getElementById('email').value.trim() === "") {
                document.getElementById('email-error').innerText = 'Email is required';
                isValid = false;
            }
            let genderSelected = document.querySelector('input[name="gender"]:checked');
            if (!genderSelected) {
                document.getElementById('gender-error').innerText = 'Please select a gender';
                isValid = false;
            }
            if (document.getElementById('course').value === "") {
                document.getElementById('course-error').innerText = 'Please select a course';
                isValid = false;
            }
            let hobbiesSelected = document.querySelectorAll('input[name="hobby"]:checked');
            if (hobbiesSelected.length === 0) {
                document.getElementById('hobby-error').innerText = 'Please select at least one hobby';
                isValid = false;
            }
            if (document.getElementById('address').value.trim() === "") {
                document.getElementById('address-error').innerText = 'Address is required';
                isValid = false;
            }

            return isValid;
        }
    </script>
    <%- include('../partials/Footer.ejs') -%>